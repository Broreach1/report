<!doctype html>
<html lang="km">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Submit Report â†’ Telegram</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div class="wrap">
<div class="card">
<h1>ğŸ“‹ á”á‰áŸ’á‡á¼á“ášá”á¶á™á€á¶ášááŸ</h1>
<p class="hint">á”áŸ†á–áŸá‰á‘á˜áŸ’ášá„áŸ‹áá¶á„á€áŸ’ášáŸ„á˜ ášá”á¶á™á€á¶ášááŸá“á¹á„ááŸ’ášá¼áœá•áŸ’á‰á¾á‘áŸ… Telegram Bot ášá”áŸáŸ‹á¢áŸ’á“á€áŸ”</p>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="msg {{ category }}">{{ message }}</div>
    {% endfor %}
  {% endif %}
{% endwith %}

{% if not chat_set %}
  <p class="msg error">âš ï¸ BOT_TOKEN / CHAT_ID á˜á·á“á‘á¶á“áŸ‹á€áŸ†áááŸ‹áŸ” áŸá¼á˜á€áŸ‚ .env á˜á»á“á”áŸ’ášá¾áŸ”</p>
{% endif %}

<form method="POST" enctype="multipart/form-data" action="/">
  <!-- Date -->
  <div class="form-group">
    <label for="date">ğŸ“… á€á¶á›á”ášá·á…áŸ’á†áŸá‘</label>
    <input id="date" name="date" type="date" placeholder="YYYY-MM-DD" required>
  </div>
  <!-- Time -->
  <div class="form-group">
    <label for="Time">â° á˜áŸ‰áŸ„á„</label>
    <input id="Time" name="Time" type="Time">
</div>

  <!-- Shift -->
  <div class="form-group">
    <label for="shift">â° áœáŸá“</label>
      <select id="shift" name="shift" required>
    <option value="">-- á‡áŸ’ášá¾áŸáœáŸá“ --</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3 ">3</option>

  </select>
  </div>

  <!-- Name Button -->
<div class="form-group">
  <label for="name">ğŸ‘¤ áˆáŸ’á˜áŸ„áŸ‡</label>
  <select id="name" name="name" required>
    <option value="">-- á‡áŸ’ášá¾áŸáˆáŸ’á˜áŸ„áŸ‡ --</option>
    <option value="Pheary">Pheary</option>
    <option value="Lin">Lin</option>
    <option value="Choy Sokna">Choy Sokna</option>
    <option value="Sun Ni">Sun Ni</option>
    <option value="Neath">Neath</option>
    <option value="Reach">Reach</option>
    <option value="SARY">SARY</option>
    <option value="Pich">Pich</option>
  </select>
</div>

  <!-- Totals -->
  <div class="form-group">
    <label for="total_glasses">ğŸ¥¤ á…áŸ†á“á½á“á€áŸ‚áœ</label>
    <input id="total_glasses" name="total_glasses" type="text">
  </div>
  <div class="form-group">
    <label for="total_money">ğŸ’µ á›á»á™áŸášá»á”</label>
    <input id="total_money" name="total_money" type="text">
  </div>

  <!-- Banks -->
  <h3>ğŸ¦ Banks</h3>
  <div class="form-group"><label>Canadia Bank ($)</label><input name="aba_usd" type="text"></div>
  <div class="form-group"><label>Canadia Bank (áŸ›)</label><input name="aba_khr" type="text"></div>
  <div class="form-group"><label>ACLEDA ($)</label><input name="acleda_usd" type="text"></div>
  <div class="form-group"><label>ACLEDA (áŸ›)</label><input name="acleda_khr" type="text"></div>
  <div class="form-group"><label>Visa Card</label><input name="other_bank" type="text"></div>
  <div class="form-group"><label>Other Bank</label><input name="other_bank" type="text"></div>

  <!-- Cash -->
  <h3>ğŸ’° Cash</h3>
  <div class="form-group"><label>á›á»á™áŠá»á›áŸ’á›á¶áš ($)</label><input name="cash_usd" type="text"></div>
  <div class="form-group"><label>á›á»á™ášáŸ€á› (áŸ›)</label><input name="cash_khr" type="text"></div>

  <!-- Expense -->
  <div class="form-group">
    <label for="expense">ğŸ’¸ á…áŸ†áá¶á™</label>
    <textarea id="expense" name="expense" rows="4" placeholder="á…á¼á›á…áŸ†áá¶á™á›á˜áŸ’á¢á·á"></textarea>
  </div>

  <!-- Balance -->
  <div class="form-group">
    <label for="balance_status">âš–ï¸ á›á¾áŸ / á”á¶á</label>
    <div class="inline-fields">
      <select id="balance_status" name="balance_status" optional>
        <option value="">-- á‡áŸ’ášá¾áŸášá¾áŸ --</option>
        <option value="á›á¾áŸ">á›á¾áŸ</option>
        <option value="á”á¶á">á”á¶á</option>
      </select>
      <input id="balance_amount" name="balance_amount" type="text" placeholder="á…áŸ†á“á½á“">
    </div>
  </div>

  <!-- Attachment -->
  <div class="form-group">
    <label for="attachment">ğŸ“ Attachment (optional)</label>
    <input id="attachment" name="attachment" type="file">
  </div>

  <button type="submit">ğŸš€ Send to Telegram</button>
</form>
</div>
</div>

<script>
const names = ["Name A", "Name B", "Name C"];
const btn = document.getElementById("chooseNameBtn");
const hiddenInput = document.getElementById("name");
const display = document.getElementById("selectedName");

btn.addEventListener("click", () => {
  let choice = prompt("áŸá¼á˜á‡áŸ’ášá¾áŸáˆáŸ’á˜áŸ„áŸ‡: " + names.join(", "));
  if(choice && names.includes(choice)){
    hiddenInput.value = choice;
    display.textContent = choice;
  } else if(choice){
    alert("áˆáŸ’á˜áŸ„áŸ‡á˜á·á“á˜á¶á“á€áŸ’á“á»á„á”á‰áŸ’á‡á¸!");
  }
});
</script>
</body>
</html>
